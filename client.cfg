[buildout]
extends =
    base.cfg

parts =
    client1
    client2
    zopepy
    varnish
    varnish-conf
    supervisor
    supervisord-initd

[supervisor]
client =
    20 client1 ${buildout:directory}/bin/client1 [console] ${client1:location}
    30 client2 ${buildout:directory}/bin/client2 [console] ${client2:location}
    40 varnish ${command:varnish-daemon} [ -f ${buildout:directory}/etc/varnish.vcl -n ${buildout:directory}/var -s malloc,1G -a ${hosts:varnish}:{ports:varnish} -F ] ${buildout:directory}
programs =
    ${supervisor:client}
